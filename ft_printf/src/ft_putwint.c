/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   ft_putwint.c                                       :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: mfabri <mfabri@student.s19.be>             +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2020/02/03 11:54:12 by mfabri            #+#    #+#             */
/*   Updated: 2020/12/07 10:17:08 by mfabri           ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

#include "../ft_printf.h"

void		ft_putchar(t_tab *tab, wint_t c)
{
	int		len;
	char	con[4];

	len = 0;
	if ((c >= 128 && c <= 1114111) && tab->lm == 'l')
	{
		if (c >= 65536 && c <= 1114111)
			con[len++] = ((c >> 18) & 0b111) | 0b11110000;
		if (c >= 2048 && len > 0)
			con[len++] = ((c >> 12) & 0b111111) | 0b10000000;
		if (c >= 2048 && len == 0)
			con[len++] = ((c >> 12) & 0b1111) | 0b11100000;
		if (c >= 128 && len > 0)
			con[len++] = ((c >> 6) & 0b111111) | 0b10000000;
		if (c >= 128 && len == 0)
			con[len++] = ((c >> 6) & 0b11111) | 0b11000000;
		con[len++] = ((c >> 0) & 0b111111) | 0b10000000;
		write(1, con, len);
		tab->printed += len;
	}
	else
	{
		write(1, &c, 1);
		tab->printed++;
	}
}
